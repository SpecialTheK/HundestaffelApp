<ion-header>
  <ion-navbar hideBackButton="true">
	  <ion-buttons>
		  <button ion-button icon-only (click)="dismissTrail()">
			  <ion-icon name="close"></ion-icon>
		  </button>
	  </ion-buttons>
    <ion-title>{{'MAP_WATER' | translate}}</ion-title>
    <ion-buttons end>
	    <button ion-button icon-only (click)="editDetails()">
		    <ion-icon name="create"></ion-icon>
	    </button>
        <button ion-button icon-only (click)="endTrail()">
            <ion-icon name="done-all"></ion-icon>
        </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>
<ion-content>
    <div class="map-container">
        <div class="map-buttons">
            <ion-fab top right>
                <button ion-fab (click)="centerMap()"><ion-icon name="locate"></ion-icon></button>
            </ion-fab>
            <ion-fab center right>
                <button ion-fab (click)="toggleFlashlight()"><ion-icon name="sunny"></ion-icon></button>
            </ion-fab>
            <ion-fab center left>
                <button ion-fab (click)="showDogOptions($event)"><ion-icon name="sunny"></ion-icon></button>
            </ion-fab>
        </div>
        <div #map class="map"></div>
    </div>
    <div class="function-container">
        <div class="loading" *ngIf="mapLoaded === false">
            <ion-spinner></ion-spinner>
        </div>
        <div class="loaded" *ngIf="mapLoaded === true">
            <ion-slides>
                <ion-slide class="info-slide">

                    <ion-grid>
                        <ion-label>{{'MAP_DISTANCE' | translate}}:</ion-label>
                        <ion-row>
                            <ion-col>
                                <ion-item>
                                    <ion-label>{{distanceToTargetMarker}} m</ion-label>
                                </ion-item>
                            </ion-col>
                        </ion-row>

                        <ion-row>
                            <ion-col>
                                <ion-item>
                                    <ion-label>{{'TIME' | translate}}:</ion-label>
                                    <ion-datetime disabled displayFormat="HH:mm:ss" [(ngModel)]="runTime"></ion-datetime>
                                </ion-item>
                            </ion-col>
                        </ion-row>
                    </ion-grid>


                </ion-slide>
                <ion-slide class="function-slide">
                    <ion-label>{{'MAP_MARKER' | translate}}</ion-label>
                    <ion-grid>
                        <ion-row>
                            <ion-col>
                                <ion-item>
                                    <button ion-button (click)="addTargetMarker()">{{'MAP_ENDPOINT' | translate}}</button>
                                </ion-item>
                            </ion-col>

                            <ion-col>
                                <ion-item>
                                    <button ion-button (click)="addWindDirectionTriangle()">{{'MAP_WIND_DIRECTION' | translate}}</button>
                                </ion-item>
                            </ion-col>
                        </ion-row>

                        <ion-row>
                            <ion-col>
                                <ion-item>
                                    <ion-range min="2" max="8" step="2" [(ngModel)]="displayOpacityMin" (ionChange)="changeDisplayOpacity()">
                                    </ion-range>
                                </ion-item>
                            </ion-col>
                        </ion-row>

                        <ion-row>
                            <ion-col>
                                <ion-item *ngFor="let trail of trailSet.trails; let i = index" (click)="addCircle($event, i)">
                                    <ion-label>{{trail.dog}}</ion-label>
                                </ion-item>
                            </ion-col>
                        </ion-row>

                    </ion-grid>
                </ion-slide>
                <ion-slide class="person-slide">
                    <ion-grid>
                        <ion-row>
                            <ion-col>
                                <ion-item>
                                    <ion-label>{{'PERSON_NAME' | translate}}: {{trailSet.person.name}}</ion-label>
                                </ion-item>
                            </ion-col>
                            <ion-col>
                                <ion-item>
                                    <ion-label>{{'PERSON_GLASSES' | translate}}: {{trailSet.person.glasses}}</ion-label>
                                </ion-item>
                            </ion-col>
                        </ion-row>

                        <ion-row>
                            <ion-col>
                                <ion-item>
                                    <ion-label>{{'PERSON_AGE' | translate}}: {{trailSet.person.age}}</ion-label>
                                </ion-item>
                            </ion-col>
                            <ion-col>
                                <ion-item>
                                    <ion-label>{{'PERSON_HAIR' | translate}}: {{trailSet.person.hair_choice}}</ion-label>
                                </ion-item>
                            </ion-col>
                        </ion-row>

                        <ion-row>
                            <ion-col>
                                <ion-item>
                                    <ion-label>{{'PERSON_ALLERGIES' | translate}}: {{trailSet.person.allergies}}</ion-label>
                                </ion-item>
                            </ion-col>
                            <ion-col>
                                <ion-item>
                                    <ion-label>{{'PERSON_HAIR_COLOR' | translate}}: {{trailSet.person.hairColor_choice}}</ion-label>
                                </ion-item>
                            </ion-col>
                        </ion-row>

                        <ion-row>
                            <ion-col>
                                <ion-item>
                                    <ion-label>{{'PERSON_ILLNESS' | translate}}: {{trailSet.person.illness}}</ion-label>
                                </ion-item>
                            </ion-col>
                            <ion-col>
                                <ion-item>
                                    <ion-label>{{'PERSON_BODY_TYPE' | translate}}: {{trailSet.person.body_choice}}</ion-label>
                                </ion-item>
                            </ion-col>
                        </ion-row>

                        <ion-row>
                            <ion-col>
                                <ion-item>
                                    <ion-label>{{'PERSON_MEDICATION' | translate}}: {{trailSet.person.medication}}</ion-label>
                                </ion-item>
                            </ion-col>
                            <ion-col>
                                <ion-item *ngIf="trailSet.person.image !== ''">
                                    <button ion-button (click)="showImage()">{{'PERSON_IMAGE' | translate}}</button>
                                </ion-item>
                            </ion-col>
                        </ion-row>
                    </ion-grid>
                </ion-slide>
            </ion-slides>
        </div>
    </div>
</ion-content>
